# 将棋アプリ - 次期開発タスクリスト

## 🎯 開発状況
**基本的なゲーム機能は全て実装完了済み**
- 駒移動、成り、持ち駒、履歴機能、KIF export/import等
- 127個のユニットテスト、10個のE2Eテスト全て通過
- TypeScript strict mode、ESLint、レスポンシブ対応済み

## 🔴 高優先度（実装準備完了）

### 1. **npm coverageスクリプトの追加**
- **課題**: CLAUDE.mdでは`npm run coverage`が記載されているがpackage.jsonに未実装
- **実装内容**: `"coverage": "vitest run --coverage"`をpackage.jsonに追加
- **期待効果**: テストカバレッジの可視化、品質管理の向上

### 2. **キーボードショートカット機能**
- **実装内容**: 
  - `Ctrl+Z` / `Ctrl+Y`: 戻る/進む
  - `R`: ゲームリセット
  - `Enter`: プロモーションダイアログで成る
  - `Escape`: 選択解除、ダイアログクローズ
- **期待効果**: アクセシビリティ向上、パワーユーザー体験改善

### 3. **不足しているE2Eテストスイートの実装**
- **実装内容**:
  - `e2e/responsive-design.spec.ts`: モバイル/デスクトップレイアウトテスト
  - `e2e/accessibility.spec.ts`: キーボードナビゲーション、aria-labelテスト
  - `e2e/kif-import-export.spec.ts`: 棋譜機能の統合テスト
- **期待効果**: 品質保証の強化、リグレッション防止

## 🟡 中優先度（UX大幅向上）

### 4. **対局時計（持ち時間）機能**
- **実装内容**:
  - 各プレイヤーの残り時間表示
  - 持ち時間設定UI（10分、30分、1時間等）
  - 秒読み機能（30秒、60秒）
  - 時間切れ判定とゲーム終了処理
- **期待効果**: 実際の対局により近い体験、競技性向上

### 5. **音声効果とアニメーション**
- **実装内容**:
  - 駒を打つ音（木の音）
  - 王手時の警告音
  - 駒移動のスムーズなアニメーション
  - ゲーム終了時のエフェクト
  - 音量設定・ON/OFF切り替え
- **期待効果**: ユーザー体験の劇的改善、没入感向上

### 6. **棋譜自動再生モード**
- **実装内容**:
  - 再生/一時停止ボタン
  - 再生速度調整（0.5x～3x）
  - 自動再生中の手動操作対応
  - 解説コメント表示機能
- **期待効果**: 学習支援、棋譜研究の効率化

### 7. **ゲーム設定UI**
- **実装内容**:
  - 設定ダイアログ（歯車アイコン）
  - 時間設定、音量設定、テーマ選択
  - 設定の永続化（localStorage）
  - デフォルト設定のリセット機能
- **期待効果**: ユーザビリティ向上、個人最適化

## 🟢 低優先度（高度な機能）

### 8. **局面解析ツール**
- **実装内容**:
  - 現在の形勢判断（優勢/劣勢表示）
  - 次の一手候補の表示
  - 駒の価値計算
  - 攻防バランスの可視化
- **期待効果**: 学習支援、戦術理解の深化

### 9. **追加の棋譜形式サポート**
- **実装内容**:
  - SFEN（Shogi Forsyth-Edwards Notation）形式
  - CSA（Computer Shogi Association）形式
  - JSON形式での棋譜エクスポート
- **期待効果**: 他ソフトとの互換性向上

### 10. **チュートリアルシステム**
- **実装内容**:
  - 駒の動かし方ガイド
  - 基本的なルール説明
  - インタラクティブな練習問題
  - 詰将棋問題の実装
- **期待効果**: 初心者への配慮、ユーザーベース拡大

### 11. **AIプレイヤー**
- **実装内容**:
  - 複数の強さレベル（初級～上級）
  - minimax算法による思考エンジン
  - 定跡データベースの実装
  - AI思考中の進捗表示
- **期待効果**: 一人用モードの提供、練習相手

## 📋 実装時の注意事項

### 技術的要件
- **テスト**: 新機能には必ずユニットテスト + E2Eテストを追加
- **型安全性**: TypeScript strict modeを維持
- **アクセシビリティ**: WCAG 2.1 AA準拠
- **パフォーマンス**: 60fps維持、メモリリーク防止

### 品質チェック
実装後は必ず以下を実行：
```bash
npm run build      # ビルド確認
npm run typecheck  # 型チェック
npm run lint       # コード品質
npm run format:check # フォーマット
npm run test       # ユニットテスト
npm run test:e2e   # E2Eテスト
```

### UI/UX ガイドライン
- **レスポンシブ**: モバイルファーストデザイン維持
- **アニメーション**: 60fps、適切なeasing
- **色彩**: アクセシビリティを考慮したコントラスト
- **操作性**: タッチデバイスでの使いやすさ

---

**最終更新**: 2025-06-18  
**ステータス**: 基本機能実装完了、次期機能開発フェーズ  
**優先対応**: 1. npm coverage → 2. キーボードショートカット → 3. E2Eテスト拡充