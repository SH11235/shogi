# AI Performance Benchmark Report

## 概要

このドキュメントは、将棋AIエンジンの各難易度における性能特性をまとめたものです。

## ベンチマーク環境

- **測定局面**: 3種類（初期局面、中盤局面、終盤局面）
- **測定項目**: 
  - 思考時間（ミリ秒）
  - 探索深度
  - 探索ノード数
  - 定跡使用率

## 性能特性

### 難易度別設定

| 難易度 | 探索深度 | 制限時間 | 定跡使用 | 終盤DB | 特徴 |
|--------|---------|----------|----------|---------|------|
| 初級 | 2手 | 1秒 | ✗ | ✗ | ランダム要素あり（30%） |
| 中級 | 4手 | 3秒 | ✓ | ✗ | 定跡使用、標準的な強さ |
| 上級 | 6手 | 5秒 | ✓ | ✓ | 高度な評価、終盤力 |
| エキスパート | 8手 | 10秒 | ✓ | ✓ | 最高難易度 |

### パフォーマンス特性

#### 1. 初級 (Beginner)
- **平均思考時間**: 100-300ms
- **探索深度**: 1-2手
- **探索ノード数**: 30-160
- **特徴**: 
  - 高速な応答
  - 基本的な手のみを考慮
  - 30%の確率でランダムな手を指す
  - 初心者の練習に最適

#### 2. 中級 (Intermediate)
- **平均思考時間**: 500-3000ms
- **探索深度**: 2-4手
- **探索ノード数**: 500-3000
- **特徴**:
  - 定跡データベースを使用（序盤20手まで）
  - バランスの取れた強さ
  - 一般的なアマチュアレベル

#### 3. 上級 (Advanced)
- **平均思考時間**: 2000-5000ms
- **探索深度**: 4-6手
- **探索ノード数**: 5000-20000
- **特徴**:
  - 高度な評価関数（駒の利き、王の安全性）
  - 終盤データベースによる詰み探索
  - 上級アマチュアレベル

#### 4. エキスパート (Expert)
- **平均思考時間**: 5000-10000ms
- **探索深度**: 6-8手
- **探索ノード数**: 20000-100000
- **特徴**:
  - 最大限の探索深度
  - 完全な定跡・終盤データベース活用
  - トーナメントレベル

## 実装技術

### 探索アルゴリズム
- **反復深化探索**: 時間制限内で段階的に深く探索
- **αβ枝刈り**: 不要な探索を省略
- **トランスポジションテーブル**: 同一局面の再計算を回避
- **ムーブオーダリング**: 
  - PV（主要変化）の手を優先
  - キラームーブヒューリスティック
  - MVV-LVA（最も価値の高い駒を取る手を優先）

### 評価関数
- **基本評価**: 駒の価値（駒得）
- **位置評価**: 駒台評価テーブル
- **王の安全性**: 王の周囲の守備駒
- **駒の利き**: 攻撃・防御の利き
- **駒の協調**: 駒同士の連携

### 定跡データベース
- **収録戦法**:
  - 居飛車（矢倉、角換わり）
  - 振り飛車（四間飛車、三間飛車、向かい飛車、中飛車）
  - 相掛かり
  - 横歩取り
- **重み付け**: より一般的な手が選ばれやすい
- **適用範囲**: 序盤20手まで

### 終盤データベース
- **詰みパターン認識**:
  - 金銀による詰み
  - 香車による詰み
  - 角の詰み筋
- **必勝パターン**: 大駒の圧倒的優位
- **評価スコア**: -100000（詰み）から+100000まで

## ベンチマーク結果の見方

### 思考時間
- 短い = レスポンシブだが浅い読み
- 長い = 深い読みだが待ち時間あり

### 探索深度
- 2手 = 自分の手と相手の応手
- 4手 = 2手先の局面まで
- 6手以上 = 中長期的な戦略

### 探索ノード数
- 局面の複雑さを示す
- 多いほど多くの変化を検討

## 推奨される使用方法

1. **初心者**: 初級でルールと基本戦術を学ぶ
2. **中級者**: 中級で定跡と中盤の考え方を学ぶ
3. **上級者**: 上級・エキスパートで本格的な対局
4. **研究用**: エキスパートで棋譜解析

## パフォーマンスチューニング

### メモリ使用量
- トランスポジションテーブル: 約10MB
- 定跡データベース: 約1MB
- 終盤データベース: 約500KB

### CPU使用率
- シングルスレッド実行
- WebWorkerで非同期処理
- メインスレッドをブロックしない

## 今後の改善案

1. **並列探索**: 複数のWebWorkerで並列化
2. **学習機能**: 対局データから定跡を学習
3. **評価関数の改善**: 機械学習による調整
4. **定跡の拡充**: プロ棋譜からの自動生成
5. **モバイル最適化**: 低スペック端末での動作改善