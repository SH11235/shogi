
echo "ğŸ” Running pre-commit checks..."

# 1. lint-staged ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨lint
echo "ğŸ“ Formatting and linting staged files..."
lint-staged

# 2. Check if any Rust files are staged
if git diff --cached --name-only | grep -q "packages/rust-core/.*\.rs$"; then
    echo "ğŸ¦€ Rust files detected, running Rust-specific checks..."
    # Run Rust checks
    (cd packages/rust-core && ./scripts/pre-commit-rust.sh)
fi

# 3. å½±éŸ¿ã®ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‹ãƒã‚§ãƒƒã‚¯ï¼ˆé«˜é€Ÿï¼‰
echo "ğŸ” Type checking affected packages..."
npm run typecheck:affected

# 4. å½±éŸ¿ã®ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ†ã‚¹ãƒˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼šé‡ã„å ´åˆã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆï¼‰
# echo "ğŸ§ª Testing affected packages..."
# npm run test:affected

echo "âœ… Pre-commit checks completed!"